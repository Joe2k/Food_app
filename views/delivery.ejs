<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Home - Brand</title>
    <link rel="stylesheet" href="home_assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i">
    <link rel="stylesheet" href="home_assets/home_css/untitled.css">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
<nav class="navbar navbar-dark navbar-expand-lg fixed-top bg-dark navbar-custom" style="color: rgb(194,74,74);background-color: rgb(255,255,255);">
    <div class="container"><a class="navbar-brand" href="/home">FOoD</a>

    </div>
</nav>
<header class="masthead text-center text-white">
    <div class="masthead-content">
        <div class="container">
            <h1 class="masthead-heading mb-0">Delivery</h1>
        </div>
    </div>
    <div class="bg-circle-1 bg-circle"></div>
    <div class="bg-circle-2 bg-circle"></div>
    <div class="bg-circle-3 bg-circle"></div>
    <div class="bg-circle-4 bg-circle"></div>
</header>
<section>
<div class="container">
    <div class="table-responsive border rounded-0 border-primary shadow-lg" style="margin: 20px 0px;border-style: dotted;">
        <table class="table table-striped">
            <thead>
            <tr>
                <th class="text-center">Food Item</th>
                <th class="text-center">Delivery</th>
            </tr>
            </thead>
            <tbody style="position: relative;>
            <%for(var i=0;i<docs.length;i++){%>
                    <tr style="position: relative;">
            <td class="text-center"><%=docs[i].name%></td>
            <%if(docs[i].active===false){%>
            <form method="post" action="/deliver">
                <input name="itemName" value="<%=docs[i].name%>" hidden>
                <input name="userName" value="<%=docs[i].userName%>" hidden>
            <td class="text-center"><button type="submit" class="btn btn-primary">Deliver</button></td>
            </form>
            <%}%>
            <%if(docs[i].active===true && docs[i].delivered===false){%>
            <form method="post" action="/delivered">
                <input name="itemName" value="<%=docs[i].name%>" hidden>
                <input name="userName" value="<%=docs[i].userName%>" hidden>
                <td class="text-center"><button type="submit" class="btn btn-secondary">Delivered</button></td>
            </form>
            <%}%>
            <%if(docs[i].active===true && docs[i].delivered===true){%>
                <td class="text-center">Delivered!</td>
            <%}%>
            </tr>
            <%}%>
            </tbody>
        </table>
    </div>
</div>
</section>
<footer class="py-5 bg-black" style="padding-top: 30px;padding-bottom: 30px;">
    <div class="container">
        <p class="text-center text-white m-0 small">Made with <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-heart-fill" fill="red" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
            </svg> by Jonathan</p>
    </div>
</footer>
<script src="assets/js/jquery.min.js"></script>
<script src="assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">
    $(document).on('click','.navbar-collapse',function(e) {
        if( $(e.target).is('a') ) {
            $(this).collapse('hide');
        }
    });

    var getLocation=function (){

       navigator.geolocation.getCurrentPosition(position => {
           const lat=position.coords.latitude;
           const long=position.coords.longitude;
           console.log(lat,long);
           const data={lat,long};
           const options ={
               method:"POST",
               headers: {
                   'Content-Type': 'application/json'
                   // 'Content-Type': 'application/x-www-form-urlencoded',
               },
               body:JSON.stringify(data)
           };
           fetch('/deliveryApi',options);
       });
    }


    setInterval(getLocation,5000);


</script>
</body>

</html>